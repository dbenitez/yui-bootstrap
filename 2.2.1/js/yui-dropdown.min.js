YAHOO.namespace("bootstrap.dropdown");var Dom=YAHOO.util.Dom,Event=YAHOO.util.Event,Selector=YAHOO.util.Selector,Lang=YAHOO.lang,ArrayAssert=YAHOO.util.ArrayAssert,toggle="[data-toggle=dropdown]",Dropdown=function(a){this.element=Dom.get(a);Event.addListener(this.element,"click",this.toggle);Event.addListener(window.document,"click",function(){Dom.removeClass(this._elParent(this.element),"open")},undefined,this,true)};Dropdown.prototype={_elParent:function(d){var b=[];if(Lang.isArray(d)){for(var c=0,a=d.length;c<a;c++){b.push(d[c].parentNode)}}else{b=[d.parentNode]}return b},constructor:Dropdown,toggle:function(d){var c=Dom.get(this),b,a;if(Dom.hasClass(c,"disabled")){return}b=getParent(c);a=Dom.hasClass(b,"open");clearMenus();if(!a){Dom.addClass(b,"open");c.focus()}Event.stopEvent(d);return false},keydown:function(g){var f,h,d,b,a;if(!/(38|40|27)/.test(g.keyCode)){return}f=Dom.get(this);Event.preventDefault(g);Event.stopPropagation(g);if(Dom.hasClass(f,"disabled")){return}d=getParent(f);b=Dom.hasClass(d,"open");if(!b||(b&&g.keyCode==27)){return f.click()}h=Selector.query("[role=menu] li:not(.divider) a",d);if(!h.length){return}var c=Selector.filter(h,":focus");a=Dom.index(c,h);if(g.keyCode==38&&a>0){a--}if(g.keyCode==40&&a<h.length-1){a++}if(!~a){a=0}h[a].focus()}};Dropdown.autoLoad=function(){if(!Dropdown.autoLoaded){Event.addListener(window.document,"click",clearMenus);Event.addListener(window.document,"touchstart",clearMenus);var a=Selector.query(".dropdown form",window.document.body);Event.addListener(a,"click",function(d){Event.stopPropagation(d)});Event.addListener(a,"touchstart",function(d){Event.stopPropagation(d)});var b=Selector.query(toggle);Event.addListener(b,"click",Dropdown.prototype.toggle);Event.addListener(b,"touchstart",Dropdown.prototype.toggle);var c=Selector.query(toggle+", [role=menu]");Event.addListener(c,"keydown",Dropdown.prototype.keydown);Event.addListener(c,"touchstart",Dropdown.prototype.keydown);Dropdown.autoLoaded=true}};function clearMenus(){Dom.removeClass(getParents(Selector.query(toggle)),"open")}function getParents(e){var b=[];if(!Lang.isArray(e)){e=[e]}for(var c=0,a=e.length;c<a;c++){var d=getParent(e[c]);d&&b.push(d)}return b}function getParent(c){var a=c.getAttribute("data-target"),b;if(!a){a=c.getAttribute("href");a=a&&/#/.test(a)&&a.replace(/.*(?=#[^\s]*$)/,"")}b=Selector.query(a);b.length||(b=c.parentNode);return b}YAHOO.bootstrap.Dropdown=Dropdown;